(function(f){f.fn.SwaggPlayer=function(q){var r={};r.id=this.attr("id");if(r.id){if(!m.isIe()){if(console.time){console.time("SwaggPlayerStart")}}e.initializeSoundManager();e.ieStuff();if(soundManager){var p=f.extend(q,r),o=new Controller();o.init(p)}else{f.error("An error occured while initializing soundManager!")}}else{f.error("Swagg Player element missing id attribute!")}};var c=function(o){this.PLAYER=o;this.props={};this.callbacks={};this.consoleSupport=false;if(console){this.consoleSupport=true}};var b=function(q,o){this.PLAYER=q;this.log=q._config.consoleSupport;this.logging=q._config.props.logging||[];this.levelall=this.logging.indexOf("all")>-1;this.levelinfo=this.levelall===true?true:this.logging.indexOf("info")>-1;this.levelerror=this.levelall===true?true:this.logging.indexOf("error")>-1;this.levelapierror=this.levelall===true?true:this.logging.indexOf("apierror")>-1;this.levelwarn=this.levelall===true?true:this.logging.indexOf("warn")>-1;this.leveldebug=this.levelall===true?true:this.logging.indexOf("debug")>-1;this.id=o};f.extend(b.prototype,{error:function(o){if(this.levelerror&&this.log){console.error("Swagg Player::"+this.id+"::Error::"+o)}},info:function(o){if(this.levelinfo&&this.log){console.log("Swagg Player::"+this.id+"::Info::"+o)}},warn:function(o){if(this.levelwarn&&this.log){console.warn("Swagg Player::"+this.id+"::Warning::"+o)}},debug:function(o){if(this.leveldebug&&this.log){console.warn("Swagg Player::"+this.id+"::Debug::"+o)}},apierror:function(o){if(this.levelapierror&&this.log){console.error("Swagg Player::"+this.id+"::API Error::"+o)}}});Utils=function(){};Utils.prototype.timeString=function(q){var p=parseInt(q),o=p>9?q:"0"+q;return o!=="60"?o:"00"};var d=function(o){this.player=o;o._logger.debug("SoundFactory Initiated")};f.extend(d.prototype,{createSound:function(o){var q=this,s=q.player._html,r=q.player._config,t=q.player._data.songs,v=o.id;if(s.useArt===true&&o.thumb!==undefined){o.configureArt();o.image=new Image();o.image.src=o.thumb}if(!t[o.id]){q.player._data.songs.push(o)}var p=q.player._html.player+"-song-"+v.toString();var u=window.soundManager.createSound({id:p,url:o.url,autoLoad:false,usePolicyFile:false,onplay:function(){var w=this;f.when(q.player._onplay(w)).done(function(x){q.player.executeIfExists("onPlay",w,x)})},onpause:function(){var w=this;f.when(q.player._onpause(w)).done(function(x){q.player.executeIfExists("onPause",w,x)})},onstop:function(){var w=this;f.when(q.player._onstop(w)).done(function(x){q.player.executeIfExists("onStop",w,x)})},onfinish:function(){var w=this;f.when(q.player._onfinish(w)).done(function(x){q.player.executeIfExists("onFinish",w,x)})},onresume:function(){var w=this;f.when(q.player._onresume(w)).done(function(x){q.player.executeIfExists("onResume",w,x)})},whileplaying:function(){var w=this;f.when(q.player._whileplaying(w)).done(function(x){q.player.executeIfExists("whilePlaying",w,x)})},whileloading:function(){var w=this;f.when(q.player._whileloading(w)).done(function(x){q.player.executeIfExists("whileLoading",w,x)})},onerror:function(){var w=this;f.when(q.player._onerror(w)).done(function(x){q.player.executeIfExists("onError",w,x)})}});u.id=p;u.repeat=q.player.internal.repeat;q.player._data.last_song=o.id;if(s.playList!==undefined&&s.playList===true){q.player.appendToPlaylist(u)}return u}});var h=function(o,p){for(prop in o){this[prop]=o[prop]}this.id=p};f.extend(h.prototype,{configureArt:function(o){this.image=new Image();this.image.src=o||this.thumb}});var j=function(o){o._logger.debug("Data intializing");this.PLAYER=o,this.last_song=-1;this.songs=[];this.curr_sprite_class="";this.isIe=m.isIe();this.curr_song=-1;this.vol_interval=20;this.interval_id=-1};f.extend(j.prototype,{processSongs:function(o){var v=this.PLAYER,q=new Array(),u=o.length,p=v._html,r=v._config;for(var t=0;t<u;t++){var s=new h(o[t],t);if(p.useArt===true&&o[t].thumb!==undefined){s.configureArt(o[t].thumb);o[t].image=new Image();o[t].image.src=o[t].thumb}q.push(s)}this.songs=q;this.last_song=this.songs.length-1},getSongs:function(){var p=this,q=this.PLAYER._config,o=q.props.data;if(typeof o==="string"){f.ajax({type:"GET",url:o,dataType:"json",success:function(r){p.processSongs(r);return null},error:function(u,r,s){var t="There was a problem fetching your songs from the server: "+s;p.PLAYER._logger.error(t);return t}})}else{this.processSongs(o);return null}}});var k=function(o){this.PLAYER=o,this.div=null;this.player=null;this.playlist=null;this.art=null;this.loading_indication=null;this.progress_wrapper=null;this.bar=null;this.loaded=null;this.song_info=null;this.controls_div=null;this.bridge_data=null;this.artist=null;this.title=null;this.useArt=false;this.playList=false;this.user_art_css={height:{height:0,width:0}};this.metadata={progressWrapperWidth:0}};f.extend(k.prototype,{initHtml:function(o){this.PLAYER._logger.debug("Html initializing");this.player=o.id;this.playlist=f("#"+this.player+" .swagg-player-list");this.art=f("#"+this.player+" .swagg-player-album-art");this.loading_indication=f("#"+this.player+" img.swagg-player-loading");this.progress_wrapper=f("#"+this.player+" .swagg-player-progress-wrapper");this.bar=f("#"+this.player+" .swagg-player-bar");this.loaded=f("#"+this.player+" .swagg-player-loaded");this.song_info=f("#"+this.player+" .swagg-player-song-info");this.controls_div=f("#"+this.player+" .swagg-player-controls");this.artist=f("#"+this.player+" .swagg-player-artist");this.title=f("#"+this.player+" .swagg-player-title");this.user_art_css={height:0,width:0};this.useArt=(this.art.length>0);this.playList=(this.playlist.length>0)},setupProgressBar:function(){this.PLAYER._logger.debug("setting up progress bar");if(this.progress_wrapper.length>0){var r=f("#"+this.player+" div.swagg-player-progress-wrapper"),o=r.css("height"),q=f("<div></div>"),p=f("<div></div>");p.addClass("swagg-player-loaded");p.css("height",o).css("width",0).css("float","left").css("margin-left","0");r.append(p);this.loaded=f("#"+this.player+" div.swagg-player-loaded");q.addClass("swagg-player-bar");q.css("height",o).css("width",0).css("float","left").css("margin-left","auto");p.append(q);this.bar=f("#"+this.player+" div.swagg-player-bar");this.metadata.progressWrapperWidth=parseFloat(this.progress_wrapper.css("width"))}}});var g=function(o){this.PLAYER=o;this.play=null;this.skip=null;this.back=null;this.stop=null};f.extend(g.prototype,{setup:function(q){var r=this.PLAYER,o=r._imageLoader;r._logger.debug("setting up controls");this.play=f("#"+r._html.player+" .swagg-player-play-button");this.skip=f("#"+r._html.player+" .swagg-player-skip-button");this.back=f("#"+r._html.player+" .swagg-player-back-button");this.stop=f("#"+r._html.player+" .swagg-player-stop-button");if(o.play!==null){this.play.css("cursor","pointer")}if(o.skip!==null){this.skip.css("cursor","pointer")}if(o.back!==null){this.back.css("cursor","pointer")}if(o.stop!==null){this.stop.css("cursor","pointer")}q.css("cursor","pointer")}});var n=function(o){this.PLAYER=o};f.extend(n.prototype,{bindControllerEvents:function(){var t=this.PLAYER,q=t._controls,s=t._imageLoader.imagesLoaded,r=t._config,o=t._imageLoader,u=r.props.buttonHover||false;t._logger.debug("Binding controller button events");q.play.bind({click:function(){t.play(t._data.curr_song);return false},mouseover:function(){if(s===true&&u){f(this).attr("src",o.playOver.src)}},mouseout:function(){if(s===true&&u){f(this).attr("src",o.play.src)}}});q.skip.bind({click:function(){t.skip(1);return false},mouseover:function(){if(s===true&&u){f(this).attr("src",o.skipOver.src)}},mouseout:function(){if(s===true&&u){f(this).attr("src",o.skip.src)}}});q.stop.bind({click:function(){t.stopMusic(t._data.curr_song);return false},mouseover:function(){if(s===true&&u){f(this).attr("src",o.stopOver.src)}},mouseout:function(){if(s===true&&u){f(this).attr("src",o.stop.src)}}});q.back.bind({click:function(){t.skip(0);return false},mouseover:function(){if(s===true&&u){f(this).attr("src",o.backOver.src)}},mouseout:function(){if(s===true&&u){f(this).attr("src",o.back.src)}}})},bindMediaKeyEvents:function(){var q=this.PLAYER,o=q._data.curr_song;q._logger.debug("Binding media key events");f(document).keydown(function(p){if(!p){p=window.event}switch(p.which){case 179:q.play(o);return false;case 178:q.stopMusic(o);return false;case 176:q.skip(1);return false;case 177:q.skip(0);return false;case 175:q.volume(o,1);return false;case 174:q.volume(o,0);return false}})},setupSeek:function(){var o=this.PLAYER;_html_=o._html;o._logger.debug("setting up seek events");_html_.loaded.css("cursor","pointer").bind({click:function(v){var p=_html_.player+"-song-"+o._data.curr_song,z=_html_.metadata.progressWrapperWidth,q=soundManager.getSoundById(p),y=v.pageX-_html_.loaded.offset().left,w=q.bytesLoaded/q.bytesTotal,s=o.getDuration(q),u=y/z,t=z*w,r=Math.round(u*s);if(t>=z){q.setPosition(r)}}});_html_.loaded.bind("mouseover hover mousemove",function(w){var p=_html_.player+"-song-"+o._data.curr_song,u=o._config,q=soundManager.getSoundById(p),z=w.pageX-_html_.loaded.offset().left,y=this,t=o.getDuration(q),v=z/_html_.metadata.progressWrapperWidth,s=Math.round(v*t),r=o.millsToTime(s,null);o.executeIfExists("onSeekPreview",this,[w,r])})}});var l=function(o){this.PLAYER=o,this.play=null;this.playOver=null;this.pause=null;this.pauseOver=null;this.stop=null;this.stopOver=null;this.back=null;this.backOver=null;this.skip=null;this.skipOver=null;this.art=null;this.imagesLoaded=false};f.extend(l.prototype,{setup:function(){this.PLAYER._logger.debug("setting up image loader");var o=this.PLAYER._config.props;if(o.buttonsDir!==undefined){this.PLAYER._controls.setup(this.PLAYER._html.controls_div);this.loadButtonImages(o.buttonsDir)}else{o.buttonHover=false}if(o.spriteImg!==undefined){this.art=new Image();this.art.src=o.spriteImg}},loadButtonImages:function(o){var q=this.PLAYER,r=q._config.props.buttonHover||false,p=q._controls;q._logger.debug("Loading images for controls");if(p.play.length>0){this.play=new Image();this.play.src=o+"play.png";this.pause=new Image();this.pause.src=o+"pause.png";if(r===true){this.playOver=new Image();this.playOver.src=o+"play-over.png";this.pauseOver=new Image();this.pauseOver.src=o+"pause-over.png"}}if(p.skip.length>0){this.skip=new Image();this.skip.src=o+"skip.png";if(r===true){this.skipOver=new Image();this.skipOver.src=o+"skip-over.png"}}if(p.back.length>0){this.back=new Image();this.back.src=o+"back.png";if(r===true){this.backOver=new Image();this.backOver.src=o+"back-over.png"}}if(p.stop.length>0){this.stop=new Image();this.stop.src=o+"stop.png";if(r===true){this.stopOver=new Image();this.stopOver.src=o+"stop-over.png"}}this.imagesLoaded=true;this.PLAYER._logger.info("Images Loaded.")}});Controller=function(){this._logger=null;this._data=null;this._html=null;this._config=null;this._events=null;this._controls=null;this._imageLoader=null;this._swaggPlayerApi=null};Controller.prototype={init:function(o){var p=this;p.initComponents(o);if(!soundManager.createSongs){soundManager.createSongs=function(z){p._logger.info("createSongs()");var v=p._data,q=v.songs;if(v.songs[0]!==undefined){var r=p._config,y=p._html,x=new d(p),A,w;for(var u=0,t=q.length;u<t;u++){A=q[u],w=x.createSound(A)}z.apply(this,[p])}else{p._logger.error("No Songs!!")}}}soundManager.onload=function(){soundManager.createSongs(function(q){var s=q._html,t=q._data,r=q._config;s.loading_indication.remove();t.curr_song=0;if(s.useArt===true){q._logger.info("Intializing album art...");q.setAlbumArtStyling(0)}q._events.setupSeek();q.showSongInfo();if(r.props.autoPlay!==undefined&&r.props.autoPlay===true){setTimeout(function(){q.play(t.curr_song)},1000)}p.executeIfExists("onSetupComplete",this,[p._swaggPlayerApi]);if(!m.isIe()){if(console.timeEnd){console.timeEnd("SwaggPlayerStart")}}q._logger.info("Swagg Player ready!")})};soundManager.onerror=function(){p._logger.error("An error has occured with loading Sound Manager! Rebooting.");soundManager.flashLoadTimeout=0;soundManager.url="swf";setTimeout(soundManager.reboot,20);setTimeout(function(){if(!soundManager.supported()){var q="Something went wrong with loading Sound Manager. No tunes for you!";_logger.error("Something went wrong with loading Sound Manager. No tunes for you!");this.executeIfExists("onErrorComplete",onError,[q])}},1500)}},initComponents:function(o){var p=this;p._config=new c(p);p._config.props=f.extend(p._config.props,o);p._logger=new b(p,o.id);p._logger.info("initializing swagg player components");p._data=new j(p);p._html=new k(p);p._html.initHtml(o);f.when(p._data.getSongs()).done(function(q){if(q){this.executeIfExists("onError",this,[])}else{p._html.setupProgressBar();p.setupApi();p._controls=new g(p);p._imageLoader=new l(p);p._imageLoader.setup();if(o.buttonsDir!==undefined){p._controls.setup(p._html.controls_div)}else{o.buttonHover=false}if(o.spriteImg!==undefined){p._imageLoader.art=new Image();p._ImageLoader.art.src=o.spriteImg}p._events=new n(p);p._events.bindControllerEvents();p._events.bindMediaKeyEvents();if(!soundManager.supported()){p._logger.warn("Support for SM2 was not found immediately! A reboot will probably occur. We shall see what happense after that.")}else{p._logger.info("SM2 support was found! It SHOULD be smooth sailing from here but hey, you never know - this web development stuff is tricky!")}}})},_whileplaying:function(r){this.progress(r);var q=r.loaded===true?r.duration:r.durationEstimate,p=this.millsToTime(r.position,null),o=this.millsToTime(q,null);arguments={currTime:p,totalTime:o};return[arguments]},_onplay:function(q){var p=this._data,r=p.songs[p.curr_song],o={};for(prop in r){if(prop!="id"&&f.isFunction(r[prop])===false){o[prop]=r[prop]}}this.playPauseButtonState(0);if(this.loaded(q)===true){this.fillLoaded()}return[o]},_onpause:function(o){this.playPauseButtonState(1);return[]},_onstop:function(o){return[]},_onfinish:function(p){if(this.internal.repeatMode===false){var q=parseInt(p.id.split("-")[3]),o=this._data.songs.length-1;if(q<o){this.skip(1)}else{this.stopMusic(q);return[]}}else{this.repeat()}},_onresume:function(o){this.playPauseButtonState(0);return[]},_whileloading:function(p){var o=this.whileLoading(p).toFixed(2)*100;return[Math.round(o)]},_onerror:function(o){var p="An error occured while attempting to play this song. Sorry about that.";this._logger.error(p);return[p]},executeIfExists:function(r,q,p){var o=this._config;if(o.props[r]&&f.isFunction(o.props[r])){o.props[r].apply(q,p)}},getDuration:function(o){var p;if(!o.loaded===true){p=o.durationEstimate}else{p=o.duration}return p},repeat:function(o){var p=_html.player+"-song-"+_data.curr_song,r=soundManager.getSoundById(p),q=this;q._logger.info("repeat()");q.resetProgressBar();r.setPosition(0);r.play()},play:function(o){var p=this._html.player+"-song-"+o,q=soundManager.getSoundById(p);this._logger.debug("Playing track: "+p);if(q.paused===true){this._logger.debug("Unpausing song");q.resume()}else{if(q.playState===1){this._logger.info("Pausing current track");q.pause()}else{this._logger.info("Playing current track from beginning");q.play()}}this.showSongInfo()},setupApi:function(){this._logger.debug("setting up api");this._swaggPlayerApi=new a(this);this.internal.player=this},appendToPlaylist:function(s){var r=this,p=s.id.split("-")[3],t=r._data.songs[parseInt(p)],o=r._html,u="item-"+t.id,q=f("<li></li>");r._logger.debug("appending to playlist: "+t.title);q.attr("id",u);q.addClass("swagg-player-playlist-item");q.html(t.title+" - "+t.artist);q.css("cursor","pointer");q.data("song",t);q.bind({click:function(){r.stopMusic(r._data.curr_song);var v=parseInt(f(this).data("song").id),w=function(){r.showSongInfo();r.play(v)};r._data.curr_song=v;if(r._html.useArt===true){r.switchArt(v,w)}else{r.showSongInfo();r.play(v)}return false}});r._html.playlist.append(q)},playPauseButtonState:function(s){var r=this,p=r._imageLoader.imagesLoaded,o,u,t=r._controls.play,q=r._config.props.buttonHover||false;if(s===1){if(p===false){t.html("play ")}else{o=r._imageLoader.play.src;if(q===true){u=r._imageLoader.playOver.src}}}else{if(s===0){if(p===false){t.html("pause ")}else{o=r._imageLoader.pause.src;if(q===true){u=r._imageLoader.pauseOver.src}}}else{r._logger.error("Invalid button state! : "+s);return false}}if(p===true){t.attr("src",o);if(q===true){t.bind({mouseout:function(){t.attr("src",o)},mouseover:function(){t.attr("src",u)}})}}},skip:function(s){var q=this,r=q._data,o=q._html,p=r.curr_song;q._logger.info("skip()");if(s===1){if(p<r.songs.length){if(p==r.songs.length-1){p=0}else{p=p+1}}}else{if(s===0){if(p===0){p=r.songs.length-1}else{p=p-1}}else{q._logger.error("Invalid skip direction flag: "+s);return false}}q.stopMusic(p);r.curr_song=p;if(q._html.useArt===true){q.executeIfExists("onBeforeSkip",q,[]);q.switchArt(p)}else{q.showSongInfo();q.play(p)}},jumpTo:function(o){var q=j,p=this;p.stopMusic(o);q.curr_song=o;this._logger.debug("jumping to track "+o);if(p._html.useArt===true){p.executeIfExists("onBeforeSkip",p,[]);p.switchArt(o)}else{p.showSongInfo();p.play(o)}},wipeArtCss:function(){var o=this,p=o._html.art;p.removeClass(o._data.curr_sprite_class);p.css("height","");p.css("width","");p.css("background-image","");p.css("background","")},resetProgressBar:function(){this._html.bar.css("width",0);this._html.loaded.css("width",0)},stopMusic:function(o){this._logger.debug("stopping music");soundManager.stopAll();this.playPauseButtonState(1);this.resetProgressBar()},volume:function(p,o){var s=this,r=s._html.player+"-song-"+p,t=soundManager.getSoundById(r),q=t.volume;if(o===1){s._logger.debug("increasing volume");soundManager.setVolume(r,q+s._data.vol_interval)}else{if(o===0){s._logger.debug("decreasing volume");soundManager.setVolume(r,q-s._data.vol_interval)}else{s._logger.error("Invalid volume flag!")}}},setAlbumArtStyling:function(p){var r=this;art=r._html.art,_data_=r._data,song=_data_.songs[p],songs=_data_.songs,config=r._config,html=r._html;r.wipeArtCss();if(song.spriteClass!==undefined){art.addClass(song.spriteClass);_data_.curr_sprite_class=song.spriteClass}else{art.css("background"," transparent url("+songs[p].image.src+")");if(config.props.morphArt===true){if(song.thumbHeight!==undefined){r._html.user_art_css.height=song.thumbHeight.toString()+"px"}else{var o=config.props.defaultAlbumArtHeight||"100";r._html.user_art_css.height=o.toString()+"px"}if(song.thumbWidth!==undefined){r._html.user_art_css.width=song.thumbWidth.toString()+"px"}else{var q=config.props.defaultAlbumArtWidth||"100";r._html.user_art_css.width=q.toString()+"px"}art.css(r._html.user_art_css)}}},switchArt:function(o){var r=this,p=r._html.player+"-song-"+o,v=r._html.art,q=r._config,t=r._data,s=t.songs,u=s[o];r._logger.info("Will show  for song at index: "+o);if(f.ui){v.hide("slide",200,function(){r.wipeArtCss();r.setAlbumArtStyling(o);f(this).show("slide",function(){r.showSongInfo();r.play(o);r.executeIfExists("onAfterSkip",r,[])})})}else{v.fadeOut("fast",function(){r.wipeArtCss();r.setAlbumArtStyling(o);f(this).fadeIn("fast",function(){r.showSongInfo();r.play(o);r.executeIfExists("onAfterSkip",r,[])})})}},id3Fill:function(o){var p=_data_.songs[parseInt(o.id.split("-")[1])];if(typeof o.id3.TIT2!==undefined){p.title=o.id3.TIT2}else{if(typeof o.id3.songname!==undefined){p.title=o.id3.songname}else{}}if(typeof o.id3.TPE2!==undefined){p.artist=o.id3.TPE2}else{if(typeof o.id3.artist!==undefined){p.artist=o.id3.artist}else{}}},fillLoaded:function(){this._html.loaded.css("width",this._html.metadata.progressWrapperWidth)},loaded:function(o){if(o.loaded===true&&o.readyState===3&&o.bytesLoaded===o.bytesTotal){return true}else{return false}},whileLoading:function(s){var r=this,u=s.position,q=s.bytesLoaded/s.bytesTotal,t=s.duration;var o=r._html.metadata.progressWrapperWidth,p=o*q;r._html.loaded.css("width",p);return q},progress:function(r){var q=this,u=r.position;duration=0,loaded_ratio=r.bytesLoaded/r.bytesTotal;if(r.loaded===false){duration=r.durationEstimate}else{duration=r.duration}var s=u/duration,o=q._html.metadata.progressWrapperWidth,p=o*s;q._html.bar.css("width",p)},millsToTime:function(s,p){var o=new Utils(),t=Math.floor(s/1000),r=this,q=0;if(t>60){q=Math.floor(t/60);t=Math.round(t%60)}return{mins:o.timeString(q),secs:o.timeString(t)}},showSongInfo:function(){var q=this,o=q._data,r=o.curr_song>-1?o.curr_song:0,p=o.songs[r];if(f.tmpl){var s=[{artist:p.artist,title:p.title}];f("#swagg-player-song-info").empty();f("#swagg-player-song-info-template").tmpl(s).appendTo("#swagg-player-song-info")}else{q._html.artist.html(p.artist);q._html.title.html(p.title)}},internal:{player:null,repeatMode:false}};var a=function(o){var p=this;p.playback={setRepeat:function(q){o.internal.repeatMode=(q===true||q===false)?q:false;return p},inRepeat:function(){var q=internal.repeat;return(q===true||q===false)?q:false},volUp:function(){o.volume(o._data.curr_song,1);return p},volDown:function(){o.volume(o._data.curr_song,0);return p},playTrack:function(q){var r=q-1;if(r<=(_data_.last_song)&&r>=0){o.jumpTo(q-1)}else{_logger.apierror("Invalid track number '"+q+"'")}return p},stop:function(){o.stopMusic(null)},addTrack:function(x){var v=o.PLAYER,r=new d(o),u,q,w;if(f.isArray(x)){for(i=0;i<x.length;i++){u=o._data.last_song,q=new h(x[i],u+1),w=r.createSound(q)}}else{u=o._data.last_song,q=new h(x,u+1),w=r.createSound(q)}}}};var m={isIe:function(){return(navigator.userAgent.indexOf("MSIE")>-1)?true:false},isSafari:function(){return(navigator.userAgent.indexOf("AppleWebKit")>-1&&navigator.userAgent.indexOf("Chrome")===-1)}};var e={initializeSoundManager:function(){if(!soundManager){window.soundManager=new SoundManager();soundManager.url="swf";soundManager.wmode="transparent";soundManager.useFastPolling=true;soundManager.useHTML5Audio=true;if(m.isSafari()){soundManager.useHighPerformance=false}else{soundManager.useHighPerformance=true}soundManager.flashLoadTimeout=1000;soundManager.beginDelayedInit()}},ieStuff:function(){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(q,s){if(this==null){throw new TypeError()}var r=Object(this);var o=r.length>>>0;if(o===0){return -1}var u=0;if(arguments.length>0){u=Number(arguments[1]);if(u!=u){u=0}else{if(u!=0&&u!=Infinity&&u!=-Infinity){u=(u>0||-1)*Math.floor(Math.abs(u))}}}if(u>=o){return -1}var p=u>=0?u:Math.max(o-Math.abs(u),0);for(;p<o;p++){if(p in r&&r[p]===q){return p}}return -1}}}}})(jQuery);