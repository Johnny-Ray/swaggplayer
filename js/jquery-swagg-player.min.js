(function(d){d.fn.SwaggPlayer=function(m){var n={};n.id=this.attr("id");if(n.id){console.time("SwaggPlayerStart");if(!soundManager||soundManager===undefined||soundManager==="undefined"){initializeSoundManager()}var l=d.extend(m,n),k=new Controller();k.init(l)}else{console.error("Swagg Player element missing id attribute!")}};var c=function(k){this.PLAYER=k;this.props={}};var b=function(l,k){this.PLAYER=l;this.isIe=i.isIe();this.id=k};b.prototype.error=function(k){if(this.PLAYER._config.props.debug===true&&this.isIe===false){console.error("Swagg Player::"+this.id+"::Error::"+k)}};b.prototype.info=function(k){if(this.PLAYER._config.props.debug===true&&this.isIe===false){console.log("Swagg Player::"+this.id+"::Info::"+k)}};b.prototype.warn=function(k){if(this.PLAYER._config.props.debug===true&&this.isIe===false){console.warn("Swagg Player::"+this.id+"::Warning::"+k)}};b.prototype.apierror=function(k){if(this.PLAYER._config.props.debug===true&&this.isIe===false){console.error("Swagg Player::"+this.id+"::API Error::"+k)}};var f=function(k){this.PLAYER=k,this.last_song=0;this.songs={};this.curr_sprite_class="";this.isIe=i.isIe();this.curr_song=0;this.vol_interval=20;this.interval_id=-1};f.prototype.processSongs=function(r){var q=this.PLAYER,l=new Array(),s=r.length,k=q._html,m=q._config;var p=function(t,u){this.url=t.url;this.artist=t.artist;this.title=t.title;this.id=u};p.prototype.configureArt=function(t){this.image=new Image();this.image.src=t};for(var o=0;o<s;o++){var n=new p(r[o],o);if(k.useArt===true&&r[o].thumb!==undefined){n.configureArt(r[o].thumb);r[o].image=new Image();r[o].image.src=r[o].thumb}l.push(n)}this.songs=l;this.last_song=this.songs.length-1};f.prototype.getSongs=function(){var k=this.PLAYER._config.props.data;if(typeof k==="string"){d.ajax({type:"GET",url:k,dataType:"json",success:function(l){_data.processSongs(l)},error:function(n,l,m){_logger.error("There was a problem fetching your songs from the server: "+m)}})}else{this.processSongs(k)}};var g=function(k){this.PLAYER=k,this.div=null;this.player=null;this.playlist=null;this.art=null;this.loading_indication=null;this.progress_wrapper=null;this.bar=null;this.loaded=null;this.song_info=null;this.controls_div=null;this.bridge_data=null;this.useArt=false;this.playList=false;this.user_art_css={height:{height:0,width:0}};this.metadata={progressWrapperWidth:0}};g.prototype.initHtml=function(k){this.PLAYER._logger.info("initHtml()");this.player=k.id;this.playlist=d("#"+this.player+" .swagg-player-list");this.art=d("#"+this.player+" .swagg-player-album-art");this.loading_indication=d("#"+this.player+" img.swagg-player-loading");this.progress_wrapper=d("#"+this.player+" .swagg-player-progress-wrapper");this.bar=d("#"+this.player+" .swagg-player-bar");this.loaded=d("#"+this.player+" .swagg-player-loaded");this.song_info=d("#"+this.player+" .swagg-player-song-info");this.controls_div=d("#"+this.player+" .swagg-player-controls");this.user_art_css={height:0,width:0};this.useArt=(this.art.length>0);this.playList=(this.playlist.length>0)};g.prototype.setupProgressBar=function(){this.PLAYER._logger.info("SetupProgressBar()");if(this.progress_wrapper.length>0){var n=d("#"+this.player+" div.swagg-player-progress-wrapper"),k=n.css("height"),m=d("<div></div>"),l=d("<div></div>");l.addClass("swagg-player-loaded");l.css("height",k).css("width",0).css("float","left").css("margin-left","0");n.append(l);this.loaded=d("#"+this.player+" div.swagg-player-loaded");m.addClass("swagg-player-bar");m.css("height",k).css("width",0).css("float","left").css("margin-left","auto");l.append(m);this.bar=d("#"+this.player+" div.swagg-player-bar");this.metadata.progressWrapperWidth=parseFloat(this.progress_wrapper.css("width"))}};var e=function(k){this.PLAYER=k;this.play=null;this.skip=null;this.back=null;this.stop=null};e.prototype.setup=function(l){var m=this.PLAYER,k=m._imageLoader;this.play=d("#"+m._html.player+" .swagg-player-play-button");this.skip=d("#"+m._html.player+" .swagg-player-skip-button");this.back=d("#"+m._html.player+" .swagg-player-back-button");this.stop=d("#"+m._html.player+" .swagg-player-stop-button");if(k.play!==null){this.play.css("cursor","pointer")}if(k.skip!==null){this.skip.css("cursor","pointer")}if(k.back!==null){this.back.css("cursor","pointer")}if(k.stop!==null){this.stop.css("cursor","pointer")}l.css("cursor","pointer")};var j=function(k){this.PLAYER=k};j.prototype.bindControllerEvents=function(){var o=this.PLAYER,l=o._controls,n=o._imageLoader.imagesLoaded,m=o._config,k=o._imageLoader,q=(m.props.buttonHover===undefined)?false:m.props.buttonHover;o._logger.info("Binding controller button events");l.play.bind({click:function(){o.play("playlink click",o._data.curr_song);return false},mouseover:function(){if(n===true&&q){d(this).attr("src",k.playOver.src)}},mouseout:function(){if(n===true&&q){d(this).attr("src",k.play.src)}}});l.skip.bind({click:function(){o.skip(1);return false},mouseover:function(){if(n===true&&q){d(this).attr("src",k.skipOver.src)}},mouseout:function(){if(n===true&&q){d(this).attr("src",k.skip.src)}}});l.stop.bind({click:function(){o.stopMusic(o._data.curr_song);return false},mouseover:function(){if(n===true&&q){d(this).attr("src",k.stopOver.src)}},mouseout:function(){if(n===true&&q){d(this).attr("src",k.stop.src)}}});l.back.bind({click:function(){o.skip(0);return false},mouseover:function(){if(n===true&&q){d(this).attr("src",k.backOver.src)}},mouseout:function(){if(n===true&&q){d(this).attr("src",k.back.src)}}})};j.prototype.bindMediaKeyEvents=function(){var l=this.PLAYER,k=l._data.curr_song;l._logger.info("Binding media key events");d(document).keydown(function(m){if(!m){m=window.event}switch(m.which){case 179:l.play("Media key event switch",k);return false;case 178:l.stopMusic(k);return false;case 176:l.skip(1);return false;case 177:l.skip(0);return false;case 175:l.volume(k,1);return false;case 174:l.volume(k,0);return false}})};j.prototype.setupSeek=function(){var k=this.PLAYER;_html_=k._html;_html_.loaded.css("cursor","pointer").bind({click:function(r){var l=_html_.player+"-song-"+k._data.curr_song,u=_html_.metadata.progressWrapperWidth,m=soundManager.getSoundById(l),t=r.pageX-_html_.loaded.offset().left,s=m.bytesLoaded/m.bytesTotal,o=k.getDuration(m),q=t/u,p=u*s,n=Math.round(q*o);if(p>=u){m.setPosition(n)}}});_html_.loaded.bind("mouseover hover mousemove",function(r){var l=_html_.player+"-song-"+k._data.curr_song,p=k._config,m=soundManager.getSoundById(l),t=r.pageX-_html_.loaded.offset().left,s=this,o=k.getDuration(m),q=t/_html_.metadata.progressWrapperWidth,n=Math.round(q*o);k.millsToTime(n,-1);if(p.props.onSeekPreview!==undefined&&d.isFunction(p.props.onSeekPreview)){internal.event_ref=r;p.props.onSeekPreview.apply(this,[])}})};var h=function(k){this.PLAYER=k,this.play=null;this.playOver=null;this.pause=null;this.pauseOver=null;this.stop=null;this.stopOver=null;this.back=null;this.backOver=null;this.skip=null;this.skipOver=null;this.art=null;this.imagesLoaded=false};h.prototype.setup=function(){var k=this.PLAYER._config.props;if(k.buttonsDir!==undefined){this.PLAYER._controls.setup(this.PLAYER._html.controls_div);this.loadButtonImages(k.buttonsDir)}else{k.buttonHover=false}if(k.spriteImg!==undefined){this.art=new Image();this.art.src=k.spriteImg}};h.prototype.loadButtonImages=function(k){var m=this.PLAYER,n=(m._config.props.buttonHover===undefined)?false:m._config.props.buttonHover,l=m._controls;m._logger.info("Loading images for controls");if(l.play.length>0){this.play=new Image();this.play.src=k+"play.png";this.pause=new Image();this.pause.src=k+"pause.png";if(n===true){this.playOver=new Image();this.playOver.src=k+"play-over.png";this.pauseOver=new Image();this.pauseOver.src=k+"pause-over.png"}}if(l.skip.length>0){this.skip=new Image();this.skip.src=k+"skip.png";if(n===true){this.skipOver=new Image();this.skipOver.src=k+"skip-over.png"}}if(l.back.length>0){this.back=new Image();this.back.src=k+"back.png";if(n===true){this.backOver=new Image();this.backOver.src=k+"back-over.png"}}if(l.stop.length>0){this.stop=new Image();this.stop.src=k+"stop.png";if(n===true){this.stopOver=new Image();this.stopOver.src=k+"stop-over.png"}}this.imagesLoaded=true};Controller=function(){this._logger=null;this._data=null;this._html=null;this._config=null;this._events=null;this._controls=null;this._imageLoader=null};Controller.prototype.init=function(k){var m=this;m._config=new c(m);m._config.props=d.extend(m._config.props,k);m._logger=new b(m,k.id);m._data=new f(m);m._html=new g(m);m._html.initHtml(k);m._data.getSongs();m._html.setupProgressBar();m.setupApi();m._controls=new e(m);m._imageLoader=new h(m);m._imageLoader.setup();if(k.buttonsDir!==undefined){m._controls.setup(m._html.controls_div)}else{k.buttonHover=false}if(k.spriteImg!==undefined){m._imageLoader.art=new Image();m._ImageLoader.art.src=k.spriteImg}if(!soundManager.supported()){m._logger.warn("Support for SM2 was not found immediately! A reboot will probably occur. We shall see what happense after that.")}else{m._logger.info("SM2 support was found! It SHOULD be smooth sailing from here but hey, you never know - this web development stuff is tricky!")}soundManager.useHTML5Audio=true;m._events=new j(m);m._events.bindControllerEvents();m._events.bindMediaKeyEvents();var l=(function(){});if(!soundManager.createSongs){soundManager.createSongs=function(){m._logger.info("createSongs()");var t=m._data;if(t.songs[0]!==undefined){clearInterval(t.interval_id);var o=t.songs,v=soundManager,p=m._config,s=true,x=m._html,y,w=(s==="undefined"||s===undefined||s===false)?true:false;m._logger.info("Auto load set to : "+w);for(var r=0,q=o.length;r<q;r++){y=v.createSound({id:x.player+"-song-"+r.toString(),url:o[r].url,autoLoad:w,onfinish:function(){if(internal.repeatMode===false){if(t.curr_song!==t.last_song){controller.skip(1)}else{m.playPauseButtonState(1);m.stopMusic(t.curr_song);var z=y.setPosition(0)}}else{m.repeat()}},onplay:function(){m.millsToTime(this.duration,0);m.playPauseButtonState(0);if(p.props.onPlay!==undefined&&d.isFunction(p.props.onPlay)){p.props.onPlay.apply(this,[])}if(m.loaded(this)===true){m.fillLoaded()}},onpause:function(){m.playPauseButtonState(1);if(p.props.onPause!==undefined&&d.isFunction(p.props.onPause)){p.props.onPause.apply(this,[])}},onstop:function(){m.playPauseButtonState(1);if(p.props.onStop!==undefined&&d.isFunction(p.props.onStop)){p.props.onStop.apply(this,[])}},onresume:function(){m.playPauseButtonState(0);if(p.props.onResume!==undefined&&d.isFunction(p.props.onResume)){p.props.onResume.apply(this,[])}},whileplaying:function(){m.progress(this);m.millsToTime(this.position,1);if(d.isFunction(p.props.whilePlaying)){p.props.whilePlaying.apply(this,[])}},whileloading:function(){m.whileLoading(this)},onerror:function(){_logger.error("An error occured while attempting to play this song. Sorry about that.");if(p.props.onError!==undefined&&d.isFunction(p.props.onError)){p.props.onError.apply(this,[])}}});y.id=m._html.player+"-song-"+r.toString();y.repeat=m.internal.repeat;if(x.playList!==undefined&&x.playList===true){m.createElement(y)}}if(x.useArt===true){m._logger.info("Intializing album art...");var n=t.songs,u=t.curr_song;x.loading_indication.remove();m.setAlbumArtStyling(0)}m._events.setupSeek();m.showSongInfo();if(p.props.autoPlay!==undefined&&p.props.autoPlay===true){setTimeout(function(){m.play("",t.curr_song)},1000)}if(p.props.onSetupComplete!==undefined&&d.isFunction(p.props.onSetupComplete)){p.props.onSetupComplete.apply(this,[])}console.timeEnd("SwaggPlayerStart");m._logger.info("Swagg Player ready!")}}}soundManager.onload=function(){m._data.interval_id=setInterval("soundManager.createSongs()",5)};soundManager.onerror=function(){m._logger.error("An error has occured with loading Sound Manager! Rebooting.");soundManager.flashLoadTimeout=0;clearInterval(_data.interval_id);soundManager.url="swf";setTimeout(soundManager.reboot,20);setTimeout(function(){if(!soundManager.supported()){_logger.error("Something went wrong with loading Sound Manager. No tunes for you!");if(k.props.onError!==undefined&&jQuery.isFunction(k.props.onError)){k.props.onError.apply(this,[])}}},1500)}};Controller.prototype.getDuration=function(k){var l;if(!k.loaded===true){l=k.durationEstimate}else{l=k.duration}return l};Controller.prototype.repeat=function(k){var l=_html.player+"-song-"+_data.curr_song,n=soundManager.getSoundById(l),m=this;m._logger.info("repeat()");m.resetProgressBar();n.setPosition(0);n.play()};Controller.prototype.play=function(m,k){var n=this,l=n._html.player+"-song-"+k,o=soundManager.getSoundById(l);n._logger.info("Playing track: "+l+". Oh and "+m+" called me!");if(o.paused===true){n._logger.info("Unpausing song");o.resume()}else{if(o.playState===1){n._logger.info("Pausing current track");o.pause()}else{n.internal.update();n._logger.info("Playing current track from beginning");o.play()}}n.showSongInfo()};Controller.prototype.setupApi=function(){window.swaggPlayerApi=new a(this);this.internal.player=this};Controller.prototype.createElement=function(n){var m=this,o=m._data.songs[parseInt(n.id.split("-")[3])],k=m._html,p="item-"+o.id,l=d("<li></li>");m._logger.info("createElement()");l.attr("id",p);l.addClass("swagg-player-playlist-item");l.html(o.title+" - "+o.artist);l.css("cursor","pointer");l.data("song",o);l.bind({click:function(){m.stopMusic(m._data.curr_song);var q=parseInt(d(this).data("song").id),r=function(){m.showSongInfo();m.play("switchArt() - by way of createElement",q)};m._data.curr_song=q;if(m._html.useArt===true){m.switchArt(q,r)}else{m.showSongInfo();m.play("switchArt() - by way of createElement",q)}return false}});m._html.playlist.append(l)};Controller.prototype.playPauseButtonState=function(o){var n=this,l=n._imageLoader.imagesLoaded,k,q,p=n._controls.play,m=(n._config.props.buttonHover===undefined)?false:n._config.props.buttonHover;if(o===1){if(l===false){p.html("play ")}else{k=n._imageLoader.play.src;if(m===true){q=n._imageLoader.playOver.src}}}else{if(o===0){if(l===false){p.html("pause ")}else{k=n._imageLoader.pause.src;if(m===true){q=n._imageLoader.pauseOver.src}}}else{n._logger.error("Invalid button state! : "+o);return false}}if(l===true){p.attr("src",k);if(m===true){p.bind({mouseout:function(){p.attr("src",k)},mouseover:function(){p.attr("src",q)}})}}};Controller.prototype.skip=function(o){var m=this,n=m._data,k=m._html,l=n.curr_song;m._logger.info("skip()");if(o===1){if(l<n.songs.length){if(l==n.songs.length-1){l=0}else{l=l+1}}}else{if(o===0){if(l===0){l=n.songs.length-1}else{l=l-1}}else{m._logger.error("Invalid skip direction flag: "+o);return false}}m.stopMusic(l);n.curr_song=l;if(m._html.useArt===true){if(m._config.props.onBeforeSkip!=="undfined"&&jQuery.isFunction(m._config.props.onBeforeSkip)){m._config.props.onBeforeSkip.apply(this,[])}m.switchArt(l)}else{m.showSongInfo();m.play("skip",l)}};Controller.prototype.jumpTo=function(k){var m=f,l=this;l.stopMusic(k);m.curr_song=k;if(l._html.useArt===true){if(l._config.props.onBeforeSkip!=="undfined"&&jQuery.isFunction(l._config.props.onBeforeSkip)){l._config.props.onBeforeSkip.apply(this,[])}l.switchArt(k)}else{l.showSongInfo();l.play("skip",k)}};Controller.prototype.wipeArtCss=function(){var k=this,l=k._html.art;l.removeClass(k._data.curr_sprite_class);l.css("height","");l.css("width","");l.css("background-image","");l.css("background","")};Controller.prototype.resetProgressBar=function(){var k=this;k._html.bar.css("width",0);k._html.loaded.css("width",0)};Controller.prototype.resetTrackTime=function(){this._logger.info("Resetting track time");this.internal.fillTime(0,0,0,0)};Controller.prototype.stopMusic=function(k){var l=this;l._logger.info("stopMusic()");soundManager.stopAll();l.resetProgressBar();l.resetTrackTime()};Controller.prototype.volume=function(l,k){var o=this,n=o._html.player+"-song-"+l,p=soundManager.getSoundById(n),m=p.volume;if(k===1){o._logger.info("Vol up");soundManager.setVolume(n,m+o._data.vol_interval)}else{if(k===0){o._logger.info("Vol down");soundManager.setVolume(n,m-o._data.vol_interval)}else{o._logger.info("Invalid volume flag!")}}};Controller.prototype.setAlbumArtStyling=function(l){var n=this;art=n._html.art,_data_=n._data,song=_data_.songs[l],songs=_data_.songs,config=n._config,html=n._html;n.wipeArtCss();if(song.spriteClass!==undefined){art.addClass(song.spriteClass);_data_.curr_sprite_class=song.spriteClass}else{art.css("background"," transparent url("+songs[l].image.src+")");if(config.props.morphArt===true){if(song.thumbHeight!==undefined){n._html.user_art_css.height=song.thumbHeight.toString()+"px"}else{var k=(config.props.defaultAlbumArtHeight!==undefined)?config.props.defaultAlbumArtHeight:"100";n._html.user_art_css.height=k.toString()+"px"}if(song.thumbWidth!==undefined){n._html.user_art_css.width=song.thumbWidth.toString()+"px"}else{var m=(config.props.defaultAlbumArtWidth!==undefined)?config.props.defaultAlbumArtWidth:"100";n._html.user_art_css.width=m.toString()+"px"}art.css(n._html.user_art_css)}}};Controller.prototype.switchArt=function(k){var n=this,l=n._html.player+"-song-"+k,r=n._html.art,m=n._config,p=n._data,o=p.songs,q=o[k];n._logger.info("Will show  for song at index: "+k);if(d.ui){r.hide("slide",200,function(){n.wipeArtCss();n.setAlbumArtStyling(k);d(this).show("slide",function(){n.showSongInfo();n.play("skip",k);if(m.props.onAfterSkip!==undefined&&d.isFunction(m.props.onAfterSkip)){m.props.onAfterSkip.apply(this,[])}})})}else{r.fadeOut("fast",function(){n.wipeArtCss();n.setAlbumArtStyling(k);d(this).fadeIn("fast",function(){n.showSongInfo();n.play("skip",k);if(m.props.onAfterSkip!==undefined&&d.isFunction(m.props.onAfterSkip)){m.props.onAfterSkip.apply(this,[])}})})}};Controller.prototype.id3Fill=function(k){var l=_data_.songs[parseInt(k.id.split("-")[1])];if(typeof k.id3.TIT2!==undefined){l.title=k.id3.TIT2}else{if(typeof k.id3.songname!==undefined){l.title=k.id3.songname}else{}}if(typeof k.id3.TPE2!==undefined){l.artist=k.id3.TPE2}else{if(typeof k.id3.artist!==undefined){l.artist=k.id3.artist}else{}}};Controller.prototype.fillLoaded=function(){this._html.loaded.css("width",this._html.metadata.progressWrapperWidth)};Controller.prototype.loaded=function(k){if(k.loaded===true&&k.readyState===3&&k.bytesLoaded===k.bytesTotal){return true}else{return false}};Controller.prototype.whileLoading=function(o){var n=this,q=o.position,m=o.bytesLoaded/o.bytesTotal,p=o.duration;var k=n._html.metadata.progressWrapperWidth,l=k*m;n._html.loaded.css("width",l)};Controller.prototype.progress=function(n){var m=this,p=n.position;duration=0,loaded_ratio=n.bytesLoaded/n.bytesTotal;if(n.loaded===false){duration=n.durationEstimate;m.millsToTime(duration,0)}else{duration=n.duration}var o=p/duration,k=m._html.metadata.progressWrapperWidth,l=k*o;m._html.bar.css("width",l)};Controller.prototype.millsToTime=function(n,k){var o=Math.floor(n/1000),m=this,l=0;if(o>60){l=Math.floor(o/60);o=Math.round(o%60)}if(k===0){m.internal.fillTotalTime(l,o)}else{if(k===1){m.internal.fillCurrentTime(l,o)}else{if(k===-1){m.internal.fillPreview(l,o)}else{_logger.error("Invalid flag passed to millsToTime()")}}}};Controller.prototype.showSongInfo=function(){var m=this,k=m._data,l=k.songs[k.curr_song];m._html.song_info.html("<p>"+l.artist+"  <br/>"+l.title+" </p>")};Controller.prototype.internal={player:null,totalMinutes:null,totalSeconds:null,currMinutes:null,currSeconds:null,seconds:null,minutes:null,event_ref:null,currTitle:null,currArtist:null,currAlbum:null,currTempo:null,repeatMode:false,update:function(){var l=this.player._data,k=l.curr_song;this.currTitle=l.songs[k].title;this.currArtist=l.songs[k].artist;this.currAlbum=l.songs[k].album;this.currTempo=l.songs[k].tempo;this.player._logger.info("Current song: ["+this.currArtist+"] ["+this.currTitle+"] ["+this.currTempo+"]")},fillTime:function(n,m,l,k){this.totalMinutes=n;this.totalSeconds=m;this.currMinutes=l;this.currSeconds=k},fillTotalTime:function(l,k){this.totalMinutes=l;this.totalSeconds=k},fillCurrentTime:function(k,l){this.currMinutes=k;this.currSeconds=l},fillPreview:function(l,k){this.minutes=l;this.seconds=k},setEventRef:function(k){this.event_ref=k}};var a=function(k){var l=this;l.currSong={getCurrTimeAsString:function(){var o=k.internal,m=(o.currMinutes>9)?o.currMinutes:"0"+o.currMinutes.toString(),n=(o.currSeconds>9)?o.currSeconds:"0"+o.currSeconds.toString();return m+":"+n},getTotalTimeAsString:function(){var m=k.internal,n=(m.totalMinutes>9)?m.totalMinutes:"0"+m.totalMinutes.toString(),o=(m.totalSeconds>9)?m.totalSeconds:"0"+m.totalSeconds.toString();return n+":"+o},getEventRef:function(){return k.internal.event_ref},previewAsString:function(){var n=k.internal;if(!isNaN(n.minutes)&&!isNaN(n.seconds)){var o=(n.minutes>9)?n.minutes:"0"+n.minutes.toString();var m=(n.seconds>9)?n.seconds:"0"+n.seconds.toString();return o+":"+m}else{return"wait."}},title:function(){return(k.internal.currTitle!==null)?k.internal.currTitle:"Unknown Title"},artist:function(){return(k.internal.currArtist!==null)?k.internal.currArtist:"Unknown Artist"},album:function(){return(k.internal.currAlbum!==null)?k.internal.currAlbum:"Unknown Album"},tempo:function(){return(k.internal.currTempo!==null)?k.internal.currTempo:"Unknown Tempo"}};l.playback={setRepeat:function(m){k.internal.repeatMode=(m===true||m===false)?m:false;return l},inRepeat:function(){var m=internal.repeat;return(m===true||m===false)?m:false},volUp:function(){k.volume(k._data.curr_song,1);return l},volDown:function(){k.volume(k._data.curr_song,0);return l},playTrack:function(m){var n=m-1;if(n<=(_data_.last_song)&&n>=0){k.jumpTo(m-1)}else{_logger.apierror("Invalid track number '"+m+"'")}return l},stop:function(){k.stopMusic(null)}}};var i={isIe:function(){return(navigator.userAgent.indexOf("MSIE")>-1)?true:false},isSafari:function(){return(navigator.userAgent.indexOf("AppleWebKit")>-1&&navigator.userAgent.indexOf("Chrome")===-1)}};Controller.prototype.initializeSoundManager=function(){_logger.info("Initializing SoundManager2");if(!soundManager){window.soundManager=new SoundManager();soundManager.url="swf";soundManager.wmode="transparent";soundManager.useFastPolling=true;if(i.isSafari()){soundManager.useHighPerformance=false}else{soundManager.useHighPerformance=true}soundManager.flashLoadTimeout=1000;soundManager.beginDelayedInit()}}})(jQuery);